---
title: "Lesson 1"
author: "Cong Wang & Renan Serenini"
date: "2022-08-25"
draft: false
excerpt: 
weight: 1
links:
- icon: github
  icon_pack: fab
  name: code
  url: https://github.com/CongWang141/statistics-with-r.git
---



<div id="author" class="section level3">
<h3>author</h3>
<p>Cong Wang &amp; Renan Serenini</p>
</div>
<div id="set-language" class="section level2">
<h2>Set language</h2>
<p>Set system language to English. Useful to search for error solutions</p>
<pre class="r"><code>Sys.setenv(LANG = &quot;en&quot;)</code></pre>
<p>To simplify the work with R, you can set working directory. Shortcut: Ctrl + Shift + H</p>
<pre class="r"><code>setwd(&quot;C:/...&quot;)</code></pre>
</div>
<div id="basic-skills-for-r" class="section level2">
<h2>Basic skills for R</h2>
<div id="basic-operations" class="section level3">
<h3>Basic operations</h3>
<p>With R you can do some simple calculations such as:</p>
<pre class="r"><code>3+4</code></pre>
<pre><code>## [1] 7</code></pre>
<pre class="r"><code>sqrt(25)</code></pre>
<pre><code>## [1] 5</code></pre>
<pre class="r"><code>6^2</code></pre>
<pre><code>## [1] 36</code></pre>
<pre class="r"><code>3**3</code></pre>
<pre><code>## [1] 27</code></pre>
<p>Two instructions can be placed on the same row separeted by “;”</p>
<pre class="r"><code>4 * 2; 5 ^ 2</code></pre>
<pre><code>## [1] 8</code></pre>
<pre><code>## [1] 25</code></pre>
</div>
<div id="objects" class="section level3">
<h3>Objects</h3>
<p>Usual assignment operator in R. Shortcut: Alt + “-”, by doing this we simply assignment the value of <strong>a</strong> to <strong>3</strong>.</p>
<pre class="r"><code>a &lt;- 3</code></pre>
</div>
<div id="vectors" class="section level3">
<h3>Vectors</h3>
<p>Vector of numbers</p>
<pre class="r"><code>x &lt;- c(10.4, 5.6, 3.1, 6.4, 21.7)
v1 &lt;- c(1:10)</code></pre>
<p>Abstract some elements from vector</p>
<pre class="r"><code>x[1]</code></pre>
<pre><code>## [1] 10.4</code></pre>
<p>Operations with vectors</p>
<pre class="r"><code>1/x</code></pre>
<pre><code>## [1] 0.09615385 0.17857143 0.32258065 0.15625000 0.04608295</code></pre>
<p>Create a new vector, using an existing operations</p>
<pre class="r"><code>y &lt;- c(x, 0, x)</code></pre>
<p>Vectors arithemetic</p>
<pre class="r"><code>v &lt;- 2*x + 3*x
v</code></pre>
<pre><code>## [1]  52.0  28.0  15.5  32.0 108.5</code></pre>
<p>Mean of vector x</p>
<pre class="r"><code>sum(x) / length(x)</code></pre>
<pre><code>## [1] 9.44</code></pre>
<p>Use a function to get the mean of vector x</p>
<pre class="r"><code>mean(x)</code></pre>
<pre><code>## [1] 9.44</code></pre>
<p>We can calculate the variance of the vector <strong>x</strong>, remind the variance formula <span class="math inline">\(S^2=\frac{\sum{(x_i-\bar{x})}}{n-1}\)</span></p>
<pre class="r"><code>sum((x-mean(x))^2)/(length(x)-1)</code></pre>
<pre><code>## [1] 53.853</code></pre>
<p>Or we can use a function</p>
<pre class="r"><code>var(x)</code></pre>
<pre><code>## [1] 53.853</code></pre>
<p>We can also creat a vectorof strings.</p>
<pre class="r"><code>s &lt;- c(&#39;age&#39;, &#39;height&#39;, &#39;weight&#39;)</code></pre>
<p>Create a vector by using <code>sequence</code></p>
<pre class="r"><code>s1 &lt;- seq(length=10, from=2,  by=1)
s2 &lt;- seq(3, 13, 1)</code></pre>
<p>Create a vector by using <code>repeat</code></p>
<pre class="r"><code>s3 &lt;- rep(3, times=5)
s4 &lt;- rep(x, 5)</code></pre>
<p>Use <code>replicate</code> to create a vector</p>
<pre class="r"><code>x &lt;- 3
replicate(n=10, expr = x+1)</code></pre>
<pre><code>##  [1] 4 4 4 4 4 4 4 4 4 4</code></pre>
<p>Use <code>replicate</code> to creat a matrix</p>
<pre class="r"><code>v &lt;- c(2, 3, 4)
replicate(n=10, expr = v)</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## [1,]    2    2    2    2    2    2    2    2    2     2
## [2,]    3    3    3    3    3    3    3    3    3     3
## [3,]    4    4    4    4    4    4    4    4    4     4</code></pre>
</div>
<div id="label-a-vector" class="section level3">
<h3>Label a vector</h3>
<p>use function to label a vector <code>names</code></p>
<pre class="r"><code>country &lt;- c(2, 4, 1, 5)
names(country) &lt;- c(&quot;China&quot;, &quot;Italy&quot;, &quot;Germany&quot;, &quot;France&quot;)
country</code></pre>
<pre><code>##   China   Italy Germany  France 
##       2       4       1       5</code></pre>
</div>
</div>
<div id="simple-loop-structure" class="section level2">
<h2>Simple loop structure</h2>
<pre class="r"><code>for (i in 1:5){
  print(i)
}</code></pre>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
</div>
<div id="check-missing-value" class="section level2">
<h2>Check missing value</h2>
<pre class="r"><code>z &lt;- c(1:4, NA)</code></pre>
<p><strong>z</strong> is a vector with last element as NA, we can check it out</p>
<pre class="r"><code>ind &lt;- is.na(z)
ind</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE</code></pre>
</div>
<div id="matrix-and-arrays" class="section level2">
<h2>Matrix and arrays</h2>
<p>A matrix is a two-dimensional (m x n) object, use function <code>matrix</code> to create a matrix</p>
<pre class="r"><code>m1 &lt;- matrix(c(1, 2, 3, 4), nrow = 2, ncol = 2)
m1</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4</code></pre>
<p>An array is a three-dimensional object. All elements must be of the same type, use function <code>array</code>,</p>
<pre class="r"><code>a1 &lt;- array(2, dim = c(1, 2, 3))
a1</code></pre>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    2    2
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    2    2
## 
## , , 3
## 
##      [,1] [,2]
## [1,]    2    2</code></pre>
<pre class="r"><code>vector &lt;- c(1:12)
multi_array &lt;- array(vector, dim = c(2, 3, 2))
multi_array</code></pre>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12</code></pre>
<p>Matrix operations, element by element product</p>
<pre class="r"><code>m2 &lt;- matrix(c(2, 3, 4, 5), 2, 2)
m1*m2</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    2   12
## [2,]    6   20</code></pre>
<p>Matrix multiplication</p>
<pre class="r"><code>m1%*%m2</code></pre>
<pre><code>##      [,1] [,2]
## [1,]   11   19
## [2,]   16   28</code></pre>
<p>Transpose</p>
<pre class="r"><code>t(m1)</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4</code></pre>
<p>Get the inverce of matrix</p>
<pre class="r"><code>solve(m1)</code></pre>
<pre><code>##      [,1] [,2]
## [1,]   -2  1.5
## [2,]    1 -0.5</code></pre>
<p>Solve equation system
<span class="math display">\[\begin{equation}
\begin{cases}
5x + 6y = 12\\
2x + 8y = 10
\end{cases}
\end{equation}\]</span></p>
<pre class="r"><code>a &lt;- matrix(c(5, 6, 2, 8), 2, 2); a</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    5    2
## [2,]    6    8</code></pre>
<pre class="r"><code>y &lt;- c(12, 10); y</code></pre>
<pre><code>## [1] 12 10</code></pre>
<pre class="r"><code>solve(a, y)</code></pre>
<pre><code>## [1]  2.7142857 -0.7857143</code></pre>
</div>
<div id="dataframe" class="section level2">
<h2>Dataframe</h2>
<p>Dataframe is similar to a matrix, but each column is independent. Elements must be of the same type just in each column.</p>
<pre class="r"><code>students &lt;-   data.frame (index = 1:10,
              height=c(1.2, 1.3, 1.1, 1.35, 1.21,1.32, 1.33, 1.22, 1.40, 1.32),
              gender=c(&quot;male&quot;, &quot;female &quot;, &quot;female&quot;, &quot;male&quot;, &quot;female&quot;,&quot;female&quot;, &quot;male&quot;, &quot;female&quot;,&quot;male&quot;,&quot;male&quot;),
              bus_transport =c(TRUE, TRUE, FALSE, FALSE, FALSE, TRUE, TRUE,FALSE, TRUE, TRUE))
students</code></pre>
<pre><code>##    index height  gender bus_transport
## 1      1   1.20    male          TRUE
## 2      2   1.30 female           TRUE
## 3      3   1.10  female         FALSE
## 4      4   1.35    male         FALSE
## 5      5   1.21  female         FALSE
## 6      6   1.32  female          TRUE
## 7      7   1.33    male          TRUE
## 8      8   1.22  female         FALSE
## 9      9   1.40    male          TRUE
## 10    10   1.32    male          TRUE</code></pre>
<p>check the names of each column</p>
<pre class="r"><code>names(students)</code></pre>
<pre><code>## [1] &quot;index&quot;         &quot;height&quot;        &quot;gender&quot;        &quot;bus_transport&quot;</code></pre>
<p>Create another variable <code>weight</code> to the Dataframe</p>
<pre class="r"><code>students$weight &lt;- c(40,38,28,50,34, 43, 38, 33 ,45, 37)</code></pre>
<p>plot students’ height and weight</p>
<pre class="r"><code>plot(students$height, students$weight)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<p>Several arguments can be passed to improve the plot</p>
<pre class="r"><code>plot(students$height, students$weight, pch=15, col=&#39;blue&#39;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
</div>
<div id="load-and-save-data" class="section level2">
<h2>Load and save data</h2>
<p>install a package we need to use, by using <code>install.packages("openxlsx")</code>
loading the package</p>
<pre class="r"><code>library(openxlsx)</code></pre>
<p>Save the dataframe we used before <code>students</code> in xlsx format</p>
<pre class="r"><code>write.xlsx(students, file = &quot;students.xlsx&quot;)</code></pre>
<p>Save the dataframe we used before <code>students</code> in csv format</p>
<pre class="r"><code>write.csv(students, file = &quot;students.csv&quot;)</code></pre>
<p>Clear the workspace by using the code below. Shortcut: Ctrl + L</p>
<pre class="r"><code>rm(list = ls())</code></pre>
<p>Load data from an online source</p>
<pre class="r"><code>accidents=read.csv(&quot;https://raw.githubusercontent.com/fivethirtyeight/data/master/airline-safety/airline-safety.csv&quot;)</code></pre>
<p>load from the device, “Import Dataset” button is highly recommended!
students &lt;- read.xlsx(“students.xlsx”)</p>
</div>
<div id="data-manipulation" class="section level2">
<h2>Data manipulation</h2>
<p>filter the data, create a sub Dataset with <code>fatal_accidents_85_99==0</code> name it as <code>no_accident</code>, create another sub Dataset with <code>fatalities_00_14&gt;100</code> and name it as <code>fatalities</code>, you can check those new datasets by yourself</p>
<pre class="r"><code>no_accident &lt;- subset(accidents, accidents$fatal_accidents_85_99==0)
fatalities &lt;- subset(accidents, fatalities_00_14&gt;100)</code></pre>
</div>
<div id="exercise-1" class="section level2">
<h2>Exercise 1</h2>
<p>The first exercise we use daily air quality measurements in NY, May to September 1973</p>
<pre class="r"><code>data(&quot;airquality&quot;)</code></pre>
<ol style="list-style-type: decimal">
<li>you are required to drop observations with one or more missing values and create a new dataset</li>
<li>plot a line graph with temperature over time</li>
</ol>
</div>
<div id="exercise-2" class="section level2">
<h2>Exercise 2</h2>
<p>Here is a random sample of male and female named <strong>x1</strong>, and a random sample from normal distribution with mean 1.7 and standared deviation 0.1 named <strong>x2</strong>, <strong>x3</strong> is depends on <strong>x2</strong> plus a random error with mean=1, sd=5</p>
<pre class="r"><code>x1 &lt;- sample(c(&#39;male&#39;, &#39;female&#39;),1000, replace = TRUE)
x2 &lt;- rnorm(1000, 1.7, 0.1)
x3 &lt;- x2*45 + rnorm(1000, 1, 5)</code></pre>
<ol style="list-style-type: decimal">
<li>you are required to create a dataset based on those vectors above</li>
<li>Name columns as x1=Gender, x2=Height, x3=Weight</li>
<li>Create a new column BMI which denotes Body mass Index with the following formula: bmi= weight/height^2</li>
<li>Suppose obese condition applies to male if BMI&gt;28 or female IF BMI&gt;30, filter observations with obese condition and make a scatterplot (Weight ~ Height)</li>
</ol>
</div>
